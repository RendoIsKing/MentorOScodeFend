@tailwind base;
@tailwind components;
@tailwind utilities;

/* TikTok-style feed helpers */
:root { --bottom-nav-h: 80px; }

@supports (height: 100dvh) {
  .vh-screen { height: 100dvh; height: 100svh; min-height: 100vh; }
}
@supports not (height: 100dvh) {
  .vh-screen { height: 100vh; min-height: 100vh; }
}

/* Prevent background page from rubber-banding behind full-bleed scrollers */
body { overscroll-behavior-y: none; }
.editing-post [data-role="mobile-topbar"],
.editing-post [data-role="profile-avatar"],
.editing-post [data-test="author-bar"],
.editing-post [data-role="header-avatar"],
.editing-post .header-avatar,
.editing-post img[alt="profile"],
.editing-post [data-edit-avatar] {
  display: none !important;
}

/* Hide mobile top bar inside a full-bleed feed if tagged */
.fullbleed [data-role="mobile-topbar"] { display: none !important; }

@layer base {
  /* Force brand font everywhere and disable italics globally */
  * { font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif !important; }
  em, i, .italic { font-style: normal !important; }
  /* Light Theme */
  :root {
    /* Light Theme (true light surfaces) */
    --background: 0 0% 100%; /* #FFFFFF */
    --foreground: 222 47% 11%; /* Slate-900 */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    /* Primary default (overridden by .theme-yellow) */
    --primary: 177 83% 43%; /* Turquoise */
    --primary-foreground: 210 40% 98%;
    /* Secondary: Navy */
    --secondary: 224 64% 33%;
    --secondary-foreground: 210 40% 98%;
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;
    /* Accent default (soft gold) */
    --accent: 44 85% 72%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 177 83% 43%;
    --radius: 0.5rem;
    --secondary-muted-foreground: 224 30% 40%;
  }

  .dark {
    /* BASE (dark blue-gray) */
    --background: 235 25% 13%; /* ~#1a1b26 */
    --foreground: 240 100% 99%; /* ~#f8f8ff */
    --card: 235 24% 18%; /* ~#24253a */
    --card-foreground: 240 100% 99%;
    --popover: 235 24% 18%; /* ~#24253a */
    --popover-foreground: 240 100% 99%;

    /* PRIMARY & SECONDARY */
    --primary: 224 43% 57%; /* ~#5d7bc4 */
    --primary-foreground: 240 100% 99%;
    --secondary: 235 17% 27%; /* ~#3a3b4f */
    --secondary-foreground: 240 30% 95%; /* ~#f0f0f5 */

    /* HELPERS & STATES */
    --muted: 235 13% 25%; /* ~#353646 */
    --muted-foreground: 232 10% 63%; /* ~#9899a6 */
    --accent: 236 12% 28%; /* ~#3f4051 */
    --accent-foreground: 240 100% 99%;
    --success: 145 63% 61%; /* ~#4ade80 */
    --success-foreground: 240 100% 99%;
    --destructive: 0 85% 58%; /* ~#ef4444 */
    --destructive-foreground: 240 100% 99%;
    --energy: 36 92% 52%; /* ~#f59e0b */
    --energy-foreground: 235 17% 22%; /* ~#2d2e3f */

    /* BORDERS & INPUTS */
    --border: 236 12% 32%; /* ~#464758 */
    --input: 236 12% 32%; /* ~#464758 */
    --input-background: 235 22% 20%; /* ~#292a3d */
    --switch-background: 235 13% 35%; /* ~#4e4f63 */
    --ring: 224 43% 57%; /* same as primary */
  }

  /* Optional Theme: Golden Yellow
     Primary: #FFC300 (hsl(46, 100%, 50%))
     Secondary (Navy): #1E3A8A (hsl(224, 64%, 33%))
     Accent (Turquoise): #12C8BE (hsl(177, 83%, 43%))
     Usage: add class "theme-yellow" on <html> or <body> to enable
  */
  .theme-yellow {
    --primary: 46 100% 50%; /* #FFC300 */
    --primary-foreground: 222 47% 11%;
    --secondary: 224 64% 33%; /* Navy */
    --secondary-foreground: 210 40% 98%;
    --accent: 177 83% 43%; /* Turquoise */
    --accent-foreground: 222 47% 11%;
    --ring: 46 100% 50%;
  }
  .dark.theme-yellow {
    --primary: 46 100% 50%;
    --primary-foreground: 222 47% 11%;
    --secondary: 224 64% 33%;
    --secondary-foreground: 210 40% 98%;
    --accent: 177 83% 43%;
    --accent-foreground: 222 47% 11%;
    --ring: 46 100% 50%;
  }

  /* Sidebar (chat interface) */
  .theme-sidebar,
  .chat-sidebar {
    --sidebar: 235 22% 15%; /* ~#202131 */
    --sidebar-foreground: 240 100% 99%; /* ~#f8f8ff */
    --sidebar-primary: 224 43% 57%; /* ~#5d7bc4 */
    --sidebar-primary-foreground: 240 100% 99%;
    --sidebar-accent: 235 20% 22%; /* ~#2e2f42 */
    --sidebar-accent-foreground: 240 100% 99%;
    --sidebar-border: 236 12% 32%; /* ~#464758 */
    --sidebar-ring: 224 43% 57%;
  }

  /* Section-specific (psychology-driven) */
  :root,
  .dark {
    /* Stats (golden amber) */
    --stats-primary: 36 92% 52%;   /* #f59e0b */
    --stats-primary-foreground: 236 17% 14%; /* ~#1e1f2e */
    --stats-secondary: 45 95% 59%; /* #fbbf24 */
    --stats-accent: 24 95% 50%;    /* #f97316 */

    /* Goals (purple/violet) */
    --goals-primary: 268 90% 65%;  /* #a855f7 */
    --goals-primary-foreground: 240 100% 99%;
    --goals-secondary: 270 95% 75%;/* #c084fc */
    --goals-accent: 262 83% 56%;   /* #9333ea */

    /* Training (red/orange) */
    --training-primary: 25 95% 51%;  /* #f97316 */
    --training-primary-foreground: 240 100% 99%;
    --training-secondary: 27 96% 62%;/* #fb923c */
    --training-accent: 0 85% 57%;    /* #ef4444 */

    /* Nutrition (green) */
    --nutrition-primary: 145 63% 61%;  /* #4ade80 */
    --nutrition-primary-foreground: 240 100% 99%;
    --nutrition-secondary: 156 68% 65%;/* #6ee7b7 */
    --nutrition-accent: 160 64% 53%;   /* #34d399 */

    /* Charts */
    --chart-1: 36 92% 52%;   /* stats (amber) */
    --chart-2: 268 90% 65%;  /* goals (purple) */
    --chart-3: 25 95% 51%;   /* training (red-orange) */
    --chart-4: 145 63% 61%;  /* nutrition (green) */
    --chart-5: 224 43% 57%;  /* primary (soft blue) */
  }

  /* Sidebar typography:
     Use the same font family as the Mentorio logotype (system fallback if custom not available).
     We keep sizes unchanged by only overriding font-family and font-weight.
  */
  .sidebar-text,
  .sidebar-text * {
    font-family: "Poppins", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    font-weight: 600; /* similar weight to logo */
  }

  /* Mobile safe-area helpers and chat polish */
  :root { --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); --tabbar-height: 56px; }
  .pt-safe { padding-top: max(0px, var(--safe-top)); }
  .pb-safe { padding-bottom: max(12px, var(--safe-bottom)); }
  .pb-tabbar { padding-bottom: calc(var(--tabbar-height) + max(12px, var(--safe-bottom))); }
  input, textarea { font-size: 16px; }
  .chat-scroll { -webkit-overflow-scrolling: touch; overscroll-behavior-y: contain; }
  /* Flame lit animation for subscribe states */
  @keyframes flamePulse {
    0% { transform: scale(1); filter: drop-shadow(0 0 0 hsl(var(--primary))); }
    50% { transform: scale(1.06); filter: drop-shadow(0 0 10px hsl(var(--primary))); }
    100% { transform: scale(1); filter: drop-shadow(0 0 0 hsl(var(--primary))); }
  }
  .flame-lit { animation: flamePulse 1.2s ease-in-out 1; }

  /* Make mobile browser bars collapse on scroll */
  html, body, :root { height: 100%; }
  body { min-height: 100dvh; overflow-y: auto; }
  @supports not (height: 100dvh) {
    html, body, :root { height: -webkit-fill-available; }
    body { min-height: -webkit-fill-available; }
  }
}

/* Utility to clamp two lines if tailwind line-clamp not available */
.clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

/* Hide legacy bottom nav ONLY on mobile (belt-and-suspenders) */
@media (max-width: 767px) {
  .legacy-mobile-bottom-nav,
  [data-legacy-bottom-nav],
  [class*="mobile-bottom-navigation"],
  [id*="mobile-bottom-navigation"],
  [class*="MobileBottomNavigation"],
  [id*="MobileBottomNavigation"],
  [class*="BottomNavigation"],
  footer.nav--mobile,
  nav.nav-mobile,
  #mobileNav,
  #bottomNav {
    display: none !important;
    pointer-events: none !important;
    height: 0 !important;
    opacity: 0 !important;
    z-index: -1 !important;
  }
}
