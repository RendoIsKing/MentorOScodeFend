@tailwind base;
@tailwind components;
@tailwind utilities;

/* TikTok-style feed helpers */
:root { --bottom-nav-h: 80px; }

@supports (height: 100dvh) {
  .vh-screen { height: 100dvh; height: 100svh; min-height: 100vh; }
}
@supports not (height: 100dvh) {
  .vh-screen { height: 100vh; min-height: 100vh; }
}

/* Prevent background page from rubber-banding behind full-bleed scrollers */
body { overscroll-behavior-y: none; }
.editing-post [data-role="mobile-topbar"],
.editing-post [data-role="profile-avatar"],
.editing-post [data-test="author-bar"],
.editing-post [data-role="header-avatar"],
.editing-post .header-avatar,
.editing-post img[alt="profile"],
.editing-post [data-edit-avatar] {
  display: none !important;
}

/* Hide mobile top bar inside a full-bleed feed if tagged */
.fullbleed [data-role="mobile-topbar"] { display: none !important; }

@layer base {
  /* Force brand font everywhere and disable italics globally */
  * { font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif !important; }
  em, i, .italic { font-style: normal !important; }
  /* Light Theme */
  :root {
    /* Light Theme (true light surfaces) */
    --background: 0 0% 100%; /* #FFFFFF */
    --foreground: 222 47% 11%; /* Slate-900 */
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    /* Primary default (overridden by .theme-yellow) */
    --primary: 177 83% 43%; /* Turquoise */
    --primary-foreground: 210 40% 98%;
    /* Secondary: Navy */
    --secondary: 224 64% 33%;
    --secondary-foreground: 210 40% 98%;
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;
    /* Accent default (soft gold) */
    --accent: 44 85% 72%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 177 83% 43%;
    --radius: 0.5rem;
    --secondary-muted-foreground: 224 30% 40%;
  }

  .dark {
    --background: 210 31% 6%;
    --foreground: 210 40% 98%;
    --card: 214 24% 18%;
    --card-foreground: 210 40% 98%;
    --popover: 214 24% 18%;
    --popover-foreground: 210 40% 98%;
    /* Primary: Turquoise */
    --primary: 177 83% 43%;
    --primary-foreground: 210 40% 98%;
    /* Secondary: Navy */
    --secondary: 224 64% 33%;
    --secondary-foreground: 210 40% 98%;
    --muted: 215 16% 35%;
    --muted-foreground: 215 16% 70%;
    --accent: 44 85% 72%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 20% 28%;
    --input: 217 20% 28%;
    --ring: 177 83% 43%;
  }

  /* Optional Theme: Golden Yellow
     Primary: #FFC300 (hsl(46, 100%, 50%))
     Secondary (Navy): #1E3A8A (hsl(224, 64%, 33%))
     Accent (Turquoise): #12C8BE (hsl(177, 83%, 43%))
     Usage: add class "theme-yellow" on <html> or <body> to enable
  */
  .theme-yellow {
    --primary: 46 100% 50%; /* #FFC300 */
    --primary-foreground: 222 47% 11%;
    --secondary: 224 64% 33%; /* Navy */
    --secondary-foreground: 210 40% 98%;
    --accent: 177 83% 43%; /* Turquoise */
    --accent-foreground: 222 47% 11%;
    --ring: 46 100% 50%;
  }
  .dark.theme-yellow {
    --primary: 46 100% 50%;
    --primary-foreground: 222 47% 11%;
    --secondary: 224 64% 33%;
    --secondary-foreground: 210 40% 98%;
    --accent: 177 83% 43%;
    --accent-foreground: 222 47% 11%;
    --ring: 46 100% 50%;
  }

  /* Sidebar typography:
     Use the same font family as the Mentorio logotype (system fallback if custom not available).
     We keep sizes unchanged by only overriding font-family and font-weight.
  */
  .sidebar-text,
  .sidebar-text * {
    font-family: "Poppins", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    font-weight: 600; /* similar weight to logo */
  }

  /* Mobile safe-area helpers and chat polish */
  :root { --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); --tabbar-height: 56px; }
  .pt-safe { padding-top: max(0px, var(--safe-top)); }
  .pb-safe { padding-bottom: max(12px, var(--safe-bottom)); }
  .pb-tabbar { padding-bottom: calc(var(--tabbar-height) + max(12px, var(--safe-bottom))); }
  input, textarea { font-size: 16px; }
  .chat-scroll { -webkit-overflow-scrolling: touch; overscroll-behavior-y: contain; }

  /* Make mobile browser bars collapse on scroll */
  html, body, :root { height: 100%; }
  body { min-height: 100dvh; overflow-y: auto; }
  @supports not (height: 100dvh) {
    html, body, :root { height: -webkit-fill-available; }
    body { min-height: -webkit-fill-available; }
  }
}

/* Utility to clamp two lines if tailwind line-clamp not available */
.clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

/* Hide legacy bottom nav ONLY on mobile (belt-and-suspenders) */
@media (max-width: 767px) {
  .legacy-mobile-bottom-nav,
  [data-legacy-bottom-nav],
  [class*="mobile-bottom-navigation"],
  [id*="mobile-bottom-navigation"],
  [class*="MobileBottomNavigation"],
  [id*="MobileBottomNavigation"],
  [class*="BottomNavigation"],
  footer.nav--mobile,
  nav.nav-mobile,
  #mobileNav,
  #bottomNav {
    display: none !important;
    pointer-events: none !important;
    height: 0 !important;
    opacity: 0 !important;
    z-index: -1 !important;
  }
}
