@tailwind base;
@tailwind components;
@tailwind utilities;

/* TikTok-style feed helpers */
:root { --bottom-nav-h: 80px; }

@supports (height: 100dvh) {
  .vh-screen { height: 100dvh; height: 100svh; min-height: 100vh; }
}
@supports not (height: 100dvh) {
  .vh-screen { height: 100vh; min-height: 100vh; }
}

/* Prevent background page from rubber-banding behind full-bleed scrollers */
body { overscroll-behavior-y: none; }
.editing-post [data-role="mobile-topbar"],
.editing-post [data-role="profile-avatar"],
.editing-post [data-test="author-bar"],
.editing-post [data-role="header-avatar"],
.editing-post .header-avatar,
.editing-post img[alt="profile"],
.editing-post [data-edit-avatar] {
  display: none !important;
}

/* Hide mobile top bar inside a full-bleed feed if tagged */
.fullbleed [data-role="mobile-topbar"] { display: none !important; }

@layer base {
  /* Light Theme */
  :root {
    --background: 0 0% 100%;
    --foreground: 224 71.4% 4.1%;
    --card: 0 0% 100%;
    --card-foreground: 224 71.4% 4.1%;
    --popover: 0 0% 100%;
    --popover-foreground: 224 71.4% 4.1%;
    /* Royal purple ~ #3B0CA6 */
    --primary: 260 90% 35%;
    --primary-foreground: 210 20% 98%;
    --secondary: 220 14.3% 95.9%;
    --secondary-foreground: 220.9 39.3% 11%;
    --muted: 220 14.3% 95.9%;
    --muted-foreground: 217.89 10.61% 64.9%;
    --accent: 220 14.3% 95.9%;
    --accent-foreground: 220.9 39.3% 11%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 20% 98%;
    --border: 220 13% 91%;
    --input: 220 13% 91%;
    --ring: 262.1 83.3% 57.8%;
    --radius: 0.5rem;
    --secondary-muted-foreground: 220 14% 56%;
  }

  .dark {
    --background: 217.5 14.8% 10.6%;
    --foreground: 0 0% 100%;
    --card: 224 71.4% 4.1%;
    --card-foreground: 210 20% 98%;
    --popover: 224 71.4% 4.1%;
    --popover-foreground: 210 20% 98%;
    /* Royal purple ~ #3B0CA6 */
    --primary: 260 90% 35%;
    --primary-foreground: 210 20% 98%;
    --secondary: 218.82 17.53% 19.02%;
    --secondary-foreground: 210 20% 98%;
    --muted: 216 13% 15%;
    --muted-foreground: 217.89 10.61% 64.9%;
    --accent: 215 27.9% 16.9%;
    --accent-foreground: 210 20% 98%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 20% 98%;
    --border: 215 27.9% 16.9%;
    --input: 215 27.9% 16.9%;
    --ring: 260 90% 35%;
  }

  /* Sidebar typography:
     Use the same font family as the Mentorio logotype (system fallback if custom not available).
     We keep sizes unchanged by only overriding font-family and font-weight.
  */
  .sidebar-text,
  .sidebar-text * {
    font-family: "Poppins", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    font-weight: 600; /* similar weight to logo */
  }

  /* Mobile safe-area helpers and chat polish */
  :root { --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); --tabbar-height: 56px; }
  .pt-safe { padding-top: max(0px, var(--safe-top)); }
  .pb-safe { padding-bottom: max(12px, var(--safe-bottom)); }
  .pb-tabbar { padding-bottom: calc(var(--tabbar-height) + max(12px, var(--safe-bottom))); }
  input, textarea { font-size: 16px; }
  .chat-scroll { -webkit-overflow-scrolling: touch; overscroll-behavior-y: contain; }

  /* Make mobile browser bars collapse on scroll */
  html, body, :root { height: 100%; }
  body { min-height: 100dvh; overflow-y: auto; }
  @supports not (height: 100dvh) {
    html, body, :root { height: -webkit-fill-available; }
    body { min-height: -webkit-fill-available; }
  }
}

/* Utility to clamp two lines if tailwind line-clamp not available */
.clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

/* Hide legacy bottom nav ONLY on mobile (belt-and-suspenders) */
@media (max-width: 767px) {
  .legacy-mobile-bottom-nav,
  [data-legacy-bottom-nav],
  [class*="mobile-bottom-navigation"],
  [id*="mobile-bottom-navigation"],
  [class*="MobileBottomNavigation"],
  [id*="MobileBottomNavigation"],
  [class*="BottomNavigation"],
  footer.nav--mobile,
  nav.nav-mobile,
  #mobileNav,
  #bottomNav {
    display: none !important;
    pointer-events: none !important;
    height: 0 !important;
    opacity: 0 !important;
    z-index: -1 !important;
  }
}
